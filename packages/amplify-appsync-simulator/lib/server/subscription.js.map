{"version":3,"file":"subscription.js","sourceRoot":"","sources":["../../src/server/subscription.ts"],"names":[],"mappings":"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"}